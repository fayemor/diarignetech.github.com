<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Xassida Cloud ‚Äî Biblioth√®que num√©rique</title>
    <meta name="description"
        content="Xassida Cloud ‚Äî partage de Xassidas, livres et vid√©os. Lecture int√©gr√©e et t√©l√©chargement." />
    <meta property="og:title" content="Xassida Cloud ‚Äî Biblioth√®que num√©rique" />
    <meta property="og:description"
        content="Acc√©dez aux Xassidas, livres et vid√©os ‚Äî lecture int√©gr√©e et t√©l√©chargement." />
    <meta name="author" content="Mor Faye" />
    <meta name="theme-color" content="#b45309" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <link rel="icon" href="xc.png" />

    <!-- Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {sans: ['Inter', 'ui-sans-serif', 'system-ui']},
                    colors: {primary: {600: '#ea580c'}}
                }
            }
        }
    </script>

    <style>
        :root {
            --accent: #ea580c;
            --bg-dark-1: #020617;
            --bg-dark-2: #071225;
            --card-bg: rgba(255, 255, 255, 0.04);
            --glass: rgba(255, 255, 255, 0.04);
            --text-light: #e8eef7;
            --text-dark: #0b1220;
        }

        html,
        body {
            font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
            color: #e6eef8;
            background: #0b1120;
            /* üî∏ fond sombre uniforme, sans bande */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;

        }


        body {
            color: var(--text-light);
            background:
                radial-gradient(1200px 600px at 10% 10%, rgba(234, 88, 12, 0.02), transparent 10%),
                linear-gradient(180deg, var(--bg-dark-1) 0%, var(--bg-dark-2) 100%);
            background-attachment: fixed;
            padding-bottom: 40px;

        }

        /* dark golden Islamic motif */
        body::before {
            content: "";
            position: fixed;
            inset: 0;
            z-index: -40;
            pointer-events: none;
            background-image:
                url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='600' height='600'><defs><pattern id='p' width='120' height='120' patternUnits='userSpaceOnUse'><path d='M60 0 L120 30 L60 60 L0 30 Z' fill='%23d4af37' fill-opacity='0.06'/><path d='M0 60 L60 90 L0 120 L-60 90 Z' fill='%23d4af37' fill-opacity='0.03'/></pattern></defs><rect width='100%' height='100%' fill='url(%23p)'/></svg>");
            background-repeat: repeat;
            background-size: 240px 240px;
            animation: pan 28s linear infinite;
            mix-blend-mode: overlay;
            opacity: 0.9;
            filter: blur(.6px) saturate(110%);
        }

        @keyframes pan {
            from {
                background-position: 0 0
            }

            to {
                background-position: 800px 400px
            }
        }

        /* Header */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 60;
            backdrop-filter: blur(8px);
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.48), rgba(0, 0, 0, 0.18));
            border-bottom: 1px solid rgba(255, 255, 255, 0.04)
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px 16px;
            display: flex;
            align-items: center;
            gap: 12px
        }

        /* hero */
        .hero-photo {
            background-image: url('xf.jpg');
            background-size: cover;
            background-position: center;
            min-height: 280px;
            position: relative;
            margin-top: 1.5rem;
            /* ‚úÖ descend l√©g√®rement le bloc (~24px) */
            border-radius: 1rem;
            /* pour garder la douceur */
        }


        /* glass cards */
        .glass {
            background: var(--card-bg);
            border: 1px solid rgba(255, 255, 255, 0.03);
            border-radius: 12px
        }

        /* modal */
        .modal-inner {
            padding-top: 18px
        }

        /* ~5mm offset */
        .modal-close {
            background: transparent;
            border: 0;
            font-size: 20px;
            padding: 6px 9px;
            border-radius: 8px;
            cursor: pointer;
            color: inherit
        }

        .modal-bottom-close {
            position: absolute;
            right: 14px;
            bottom: 14px;
            background: rgba(0, 0, 0, 0.6);
            color: #fff;
            border: 0;
            padding: 8px 10px;
            border-radius: 8px;
            cursor: pointer
        }

        .modal-bottom-close.light {
            background: rgba(0, 0, 0, 0.08);
            color: var(--text-dark);
            border: 1px solid rgba(0, 0, 0, 0.06);
        }

        /* search sizing to avoid overlap */
        #searchWrap {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 0
        }

        #globalSearch {
            min-width: 90px;
            width: 220px;
            max-width: 420px;
            transition: width .18s ease
        }

        @media (max-width:640px) {
            #globalSearch {
                width: calc(100vw - 150px);
                max-width: 260px
            }
        }

        /* light mode */
        .light body {
            background: linear-gradient(180deg, #ffffff 0%, #f7f7f8 100%);
            color: var(--text-dark)
        }

        /* Text color in cards for light mode */
        .light .glass h3,
        .light .glass p {
            color: #b45309 !important;
            /* orange fonc√© */
        }


        .light .glass p {
            color: var(--text-dark) !important;
        }

        .light .glass h3 {
            color: #b45309 !important;
        }


        .light header {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.92), rgba(255, 255, 255, 0.98));
            border-bottom: 1px solid rgba(16, 24, 32, 0.05)
        }

        .light .glass {
            background: rgba(16, 24, 32, 0.03);
            border: 1px solid rgba(16, 24, 32, 0.04);
            color: var(--text-dark)
        }

        .light .modal-bottom-close {
            background: rgba(255, 255, 255, 0.9);
            color: var(--text-dark);
            border: 1px solid rgba(0, 0, 0, 0.06)
        }

        /* === Personnalisation du header en mode clair === */
        .light header .text-amber-400 {
            color: #b45309 !important;
            /* orange fonc√© pour "Xassida Cloud" */
        }

        .light header .text-slate-300 {
            color: #000000 !important;
            /* noir pour "Biblioth√®que num√©rique" */
        }



        .light #globalSearch {
            color: #000000;
            /* texte en noir */
            background-color: #ffffff;
            /* fond blanc */
            border: 1px solid #b45309;
            /* contour orange fonc√© */
        }

        .light #globalSearch::placeholder {
            color: #000000;
            /* gris moyen pour le placeholder */
        }

        .light #themeToggle,
        .light #mobileMenuBtn {
            background-color: #e5e7eb !important;
            /* fond gris clair */
            color: #000000;
            /* ic√¥ne sombre */
        }


        /* Animated welcome text */
        .pulse-amber {
            animation: pulse 3s infinite;
            color: var(--accent)
        }

        @keyframes pulse {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-6px)
            }
        }

        /* ensure mobile menu button visible */
        #mobileMenuBtn {
            display: block
        }

        /* extended desktop menu */
        @media(min-width:900px) {
            nav.desktop-nav {
                display: flex;
                gap: 12px;
                align-items: center
            }

            nav.desktop-nav .nav-btn {
                padding: 8px 12px;
                font-weight: 600
            }
        }

        /* ---------- THEME: styles clairs et sombres appliqu√©s sur <html> ---------- */
        /* Light mode (texte orange fonc√©, bibliotheque en noir, search texte noir) */
        html.light body {
            background: linear-gradient(180deg, #ffffff 0%, #f7f7f8 100%);
            color: var(--text-dark);
        }

        html.light header .text-amber-400,
        html.light .text-amber-400 {
            /* titre */
            color: #b45309 !important;
            /* orange fonc√© */
        }

        html.light header .text-slate-300,
        html.light .text-slate-300 {
            /* sous-titre */
            color: #000000 !important;
        }

        /* Search input in light mode */
        html.light #globalSearch {
            color: #000000 !important;
            /* texte saisi en noir */
            background-color: #ffffff !important;
            /* fond blanc */
            border: 1px solid #b45309 !important;
            /* contour orange fonc√© */
        }

        html.light #globalSearch::placeholder {
            color: #9ca3af !important;
        }

        /* Buttons (theme/menu) background in light mode */
        html.light #themeToggle,
        html.light #mobileMenuBtn {
            background-color: #e5e7eb !important;
            /* gris clair */
            color: #000 !important;
        }

        /* Dark mode: force text in search to black as requested, with light input background for readability */
        html.dark #globalSearch {
            color: #000000 !important;
            /* texte saisi en noir */
            background-color: #f5f5f5 !important;
            /* fond gris clair pour lisibilit√© sur sombre */
            border: 1px solid #b45309 !important;
        }

        html.dark #globalSearch::placeholder {
            color: #555555 !important;
        }

        /* Also ensure cards text color in light mode becomes orange-donk */
        html.light .glass h3,
        html.light .glass p {
            color: #b45309 !important;
        }

        /* =============================
   Boutons "Lire" & "T√©l√©charger"
   ============================= */

        /* Mode clair */
        html.light .btn-read {
            background-color: #b45309 !important;
            /* orange fonc√© */
            color: #ffffff !important;
            transition: background 0.2s;
        }

        html.light .btn-read:hover {
            background-color: #92400e !important;
        }

        html.light .btn-dl {
            background-color: #e5e7eb !important;
            /* gris clair */
            color: #000000 !important;
            transition: background 0.2s;
        }

        html.light .btn-dl:hover {
            background-color: #d1d5db !important;
        }

        /* Mode sombre */
        html.dark .btn-read {
            background-color: #ea580c !important;
            /* orange vif */
            color: #000000 !important;
            transition: background 0.2s;
        }

        html.dark .btn-read:hover {
            background-color: #fb923c !important;
        }

        html.dark .btn-dl {
            background-color: #334155 !important;
            /* gris bleu fonc√© */
            color: #f8fafc !important;
            transition: background 0.2s;
        }

        html.dark .btn-dl:hover {
            background-color: #475569 !important;
        }

        /* === Boutons Lire et T√©l√©charger ‚Äî visibles dans les deux modes === */

        /* style commun */
        .btn-read,
        .btn-dl {
            border-radius: 9999px !important;
            /* super arrondi type "pill button" */
            font-weight: 600;
            padding: 8px 18px;
            transition: all 0.25s ease-in-out;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
        }


        /* ----- MODE CLAIR ----- */
        html.light .btn-read {
            background-color: #b45309 !important;
            /* orange fonc√© */
            color: #ffffff !important;
            border: 1px solid #92400e !important;
        }

        html.light .btn-read:hover {
            background-color: #92400e !important;
        }

        html.light .btn-dl {
            background-color: #e5e7eb !important;
            /* gris clair */
            color: #000000 !important;
            border: 1px solid #d1d5db !important;
        }

        html.light .btn-dl:hover {
            background-color: #d1d5db !important;
        }

        /* ----- MODE SOMBRE ----- */
        html.dark .btn-read {
            background-color: #ea580c !important;
            /* orange vif */
            color: #000000 !important;
            border: 1px solid #fb923c !important;
        }

        html.dark .btn-read:hover {
            background-color: #fb923c !important;
        }

        html.dark .btn-dl {
            background-color: #1e293b !important;
            /* gris bleu fonc√© */
            color: #ffffff !important;
            border: 1px solid #334155 !important;
        }

        html.dark .btn-dl:hover {
            background-color: #334155 !important;
        }

        /* === Boutons Lire et T√©l√©charger ‚Äî double compatibilit√© === */

        .btn-read,
        .btn-dl {
            border-radius: 6px;
            font-weight: 600;
            padding: 6px 14px;
            transition: all 0.25s ease-in-out;
        }

        /* ------------------ MODE CLAIR ------------------ */
        html.light .btn-read,
        body:not(.dark) .btn-read {
            background-color: #b45309 !important;
            /* orange fonc√© */
            color: #ffffff !important;
            border: 1px solid #92400e !important;
        }

        html.light .btn-read:hover,
        body:not(.dark) .btn-read:hover {
            background-color: #92400e !important;
        }

        html.light .btn-dl,
        body:not(.dark) .btn-dl {
            background-color: #e5e7eb !important;
            /* gris clair */
            color: #000000 !important;
            border: 1px solid #d1d5db !important;
        }

        html.light .btn-dl:hover,
        body:not(.dark) .btn-dl:hover {
            background-color: #d1d5db !important;
        }

        /* ------------------ MODE SOMBRE ------------------ */
        html.dark .btn-read,
        body.dark .btn-read {
            background-color: #ea580c !important;
            /* orange vif */
            color: #000000 !important;
            border: 1px solid #fb923c !important;
        }

        html.dark .btn-read:hover,
        body.dark .btn-read:hover {
            background-color: #fb923c !important;
        }

        html.dark .btn-dl,
        body.dark .btn-dl {
            background-color: #78350f !important;
            /* gris bleu fonc√© */
            color: #ffffff !important;
            border: 1px solid #334155 !important;
        }

        html.dark .btn-dl:hover,
        body.dark .btn-dl:hover {
            background-color: #334155 !important;
        }

        /* === Espacement sup√©rieur des pages de contenu === */
        #page-xassidas,
        #page-livres,
        #page-videos {
            margin-top: 2.5rem;
            /* ‚âà 40px d‚Äôespace sous le header */
        }

        @media (max-width: 640px) {

            #page-xassidas,
            #page-livres,
            #page-videos {
                margin-top: 1.5rem;
                /* un peu moins sur mobile */
            }
        }

        /* === Transition douce entre mode clair et sombre === */
        html,
        body,
        header,
        main,
        .glass,
        .btn-read,
        .btn-dl {
            transition: background-color 1s ease, color 1s ease, border-color 1s ease, box-shadow 0.8s ease;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: url('motif-islamic.png') repeat center;
            background-size: 500px;
            opacity: 0.04;
            animation: shimmer 20s linear infinite;
            z-index: -10;
        }

        @keyframes shimmer {
            0% {
                background-position: 0 0;
            }

            100% {
                background-position: 500px 500px;
            }
        }

        @media (max-width: 640px) {

            h1,
            h2,
            h3 {
                line-height: 1.3;
            }

            .btn-read,
            .btn-dl {
                padding: 10px 16px;
                font-size: 0.95rem;
            }

            #globalSearch {
                font-size: 0.9rem;
            }

            .btn-read:active,
            .btn-dl:active {
                transform: scale(0.96);
            }

            button,
            .nav-btn {
                cursor: pointer;
            }



        }

        /* üî∂ Style du bouton "Regarder" */

        /* üî∂ Bouton "Regarder" ‚Äî version forc√©e et ultra-arrondie */
        .btn-watch {
            background-color: #ea580c !important;
            /* orange fonc√© */
            color: #000 !important;
            /* texte noir */
            border-radius: 9999px !important;
            /* arrondi maximal */
            padding: 10px 20px !important;
            /* un peu plus large */
            font-weight: 600 !important;
            transition: all 0.3s ease !important;
        }

        /* üåô Mode sombre */
        .dark .btn-watch {
            background-color: #f59e0b !important;
            /* dor√© plus doux */
            color: #fff !important;
        }

        /* ‚ú® Effet au survol */
        .btn-watch:hover {
            opacity: 0.9 !important;
            transform: scale(1.05) !important;
        }

        @media (max-width: 640px) {
            header .max-w-6xl {
                flex-direction: row;
                align-items: flex-start;
            }

            #searchWrap {
                width: 100%;
                order: 3;
                /* la recherche passe sous le logo */
                margin-top: 0.5rem;
            }

            #btnSearch {
                flex: 1;
            }

            #mobileMenuBtn,
            #themeToggle {
                flex-shrink: 0;
            }
        }

        @media (max-width: 640px) {
            #page-home {
                margin-top: 5.5rem !important;
                /* d√©cale la section d‚Äôaccueil sous le header */
            }
        }

        /* üì± Ajustement des boutons sur mobile */
        @media (max-width: 640px) {

            .btn-read,
            .btn-dl,
            .btn-watch {
                font-size: 0.78rem !important;
                /* üîπ r√©duit l√©g√®rement le texte */
                padding: 6px 10px !important;
                /* üîπ moins large */
                border-radius: 10px !important;
                /* üîπ toujours arrondi */
            }
        }

        /* üíª Cache le bouton menu sur desktop (fonctionne √† coup s√ªr) */
        @media (min-width: 768px) {
            #mobileMenuBtn {
                display: none !important;
            }
        }

        /* üì± Am√©lioration du rendu mobile */
        @media (max-width: 640px) {

            /* 2 colonnes sur mobile */
            #gridXassida,
            #gridLivres,
            #gridVideos {
                display: grid;
                grid-template-columns: 1fr;
                /* üîπ deux colonnes fixes */
                gap: 0.8rem;
                /* üîπ espace r√©duit */
                padding: 0 0.4rem;
                /* üîπ l√©ger padding lat√©ral */
            }

            /* üî∏ Boutons plus petits et compacts */
            .btn-read,
            .btn-dl,
            .btn-watch {
                font-size: 0.72rem !important;
                /* üîπ police r√©duite */
                padding: 4px 8px !important;
                /* üîπ padding minimal */
                border-radius: 6px !important;
                /* üîπ coins doux */
                font-weight: 600 !important;
                line-height: 1 !important;
            }

            /* √âvite que les boutons se serrent trop */
            .flex.gap-2 {
                gap: 0.4rem !important;
            }

            section.page {
                margin-top: 0.5rem !important;
                margin-bottom: 0.5rem !important;
                padding-top: 0.5rem !important;
                padding-bottom: 0.5rem !important;
                padding-left: 0.4rem !important;
                /* üîπ marge uniforme */
                padding-right: 0.4rem !important;
                /* üîπ marge uniforme */
            }
        }

        /* === ‚úÖ Taille des boutons ajust√©e === */

        /* ‚úÖ Style uniforme pour tous les boutons (Lire, T√©l√©charger, Regarder) */
        .btn-read,
        .btn-dl,
        .btn-watch {
            background-color: #b45309 !important;
            /* orange fonc√© */
            color: #ffffff !important;
            /* texte blanc */
            border: 1px solid #92400e !important;
            /* contour assorti */
            border-radius: 9999px !important;
            padding: 6px 18px !important;
            font-weight: 600;
            transition: all 0.25s ease-in-out;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
        }

        /* üî∏ Mode clair ‚Äî coh√©rence visuelle */
        html.light .btn-read,
        html.light .btn-watch {
            background-color: #b45309 !important;
            /* orange fonc√© */
            color: #ffffff !important;
            border: 1px solid #92400e !important;
        }

        html.light .btn-read:hover,
        html.light .btn-watch:hover {
            background-color: #92400e !important;
        }

        html.light .btn-dl {
            background-color: #e5e7eb !important;
            /* gris clair */
            color: #000000 !important;
            border: 1px solid #d1d5db !important;
        }

        html.light .btn-dl:hover {
            background-color: #d1d5db !important;
        }

        /* üåô Mode sombre ‚Äî m√™me look */
        html.dark .btn-read,
        html.dark .btn-watch {
            background-color: #ea580c !important;
            /* orange vif */
            color: #000000 !important;
            border: 1px solid #fb923c !important;
        }

        html.dark .btn-read:hover,
        html.dark .btn-watch:hover {
            background-color: #c05e0e !important;
        }

        html.dark .btn-dl {
            background-color: #1e293b !important;
            /* gris bleu fonc√© */
            color: #ffffff !important;
            border: 1px solid #334155 !important;
        }

        html.dark .btn-dl:hover {
            background-color: #334155 !important;
        }

        /* üì± Version mobile : un peu plus compacte */
        @media (max-width: 640px) {

            .btn-read,
            .btn-dl,
            .btn-watch {
                padding: 5px 14px !important;
                font-size: 0.85rem !important;
            }
        }


        footer {
            bottom: 0;
            left: 0;
            width: 100%;
            height: 22px;
            /* ‚Üê √âpaisseur encore plus fine */
            background: rgba(10, 15, 30, 0.92);
            color: #cbd5e1;
            font-size: 0.2rem;
            /* police l√©g√®rement plus petite */
            text-align: center;
            display: flex;
            border-radius: 10px;
            align-items: center;
            justify-content: center;
            border-top: 1px solid rgba(255, 255, 255, 0.06);
            z-index: 100;
            backdrop-filter: blur(5px);
        }

        footer p {
            margin: 0;
            padding: 0;
            line-height: 0.2;
        }

        /* Mode clair */
        html.light footer {
            background: rgba(255, 255, 255, 0.9);
            color: #0f172a;
            border-top: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* === Splash Screen avec effet ZOOM + √©criture === */
        #splashScreen {
            position: fixed;
            inset: 0;
            background: radial-gradient(circle at center, #b45309 15%, #0b1120 80%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            animation: fadeOut 1s ease forwards;
            animation-delay: 3.6s;
            /* attend la fin de l‚Äôanimation avant disparition */
        }

        .splash-logo {
            width: 300px;
            height: 300px;
            object-fit: contain;
            opacity: 0;
            transform: scale(0.7);
            animation: zoomIn 2s ease forwards;
        }

        /* Texte typewriter */
        .splash-text {
            margin-top: 1.2rem;
            font-size: 1.9rem;
            color: #fff;
            font-weight: 700;
            letter-spacing: 1px;
            white-space: nowrap;
            overflow: hidden;
            border-right: 2px solid #fff;
            /* curseur */
            width: 0;
            opacity: 0;
            animation: typing 2s steps(14, end) forwards 1.4s, blink 0.7s step-end infinite 3.4s;
        }

        /* === Animations === */
        @keyframes zoomIn {
            0% {
                transform: scale(0.7);
                opacity: 0;
            }

            60% {
                transform: scale(1.05);
                opacity: 1;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @keyframes typing {
            from {
                width: 0;
                opacity: 1;
            }

            to {
                width: 13ch;
                /* nombre de caract√®res de "Xassida Cloud" */
                opacity: 1;
            }
        }

        @keyframes blink {
            50% {
                border-color: transparent;
            }
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
            }
        }

        #splashScreen {
            gap: 1rem;
        }

        /* ‚úÖ Animation douce du header quand il dispara√Æt */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
            transition: transform 0.6s ease, opacity 0.4s ease;
        }

        header.hidden {
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
        }

        /* üîπ Cache tout bouton X en haut √† droite des modales */
        .modal-inner .modal-close,
        button[aria-label="Close"],
        button[title="Fermer"],
        button.close-modal {
            display: none !important;
            opacity: 0 !important;
            visibility: hidden !important;
        }

        /* ‚úÖ Animation douce du header quand il dispara√Æt ou revient */
        header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 999;
            transition: transform 0.6s ease-in-out, opacity 0.4s ease-in-out;
        }

        header.hidden {
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
        }

        #customAlert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 20, 30, 0.9);
            color: #fff;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            font-size: 0.95rem;
            text-align: center;
            z-index: 9999;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        #customAlert.show {
            opacity: 1;
        }
    </style>
</head>

<!-- Splash Screen -->
<div id="splashScreen">
    <img src="logo.png" alt="Xassida Cloud" class="splash-logo">
</div>



<body>
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-black/40 backdrop-blur border-b border-white/5">
        <div class="max-w-6xl mx-auto px-4 py-3 flex flex-wrap items-center justify-between gap-3">


            <!-- Logo -->
            <div class="flex items-center gap-3">
                <img src="xc.png" alt="Logo Xassida Cloud" class="w-10 h-10 rounded-md object-cover"
                    onerror="this.style.display='none'">
                <div>
                    <div class="text-lg font-extrabold text-amber-400">Xassida Cloud</div>
                    <div class="text-xs text-slate-300">Biblioth√®que num√©rique</div>
                </div>
            </div>

            <!-- Navigation principale (visible seulement sur desktop) -->
            <nav class="ml-6 hidden md:flex gap-2 items-center">
                <button data-nav="home" class="nav-btn text-sm px-3 py-2 rounded-md hover:bg-white/5">Accueil</button>
                <button data-nav="xassidas"
                    class="nav-btn text-sm px-3 py-2 rounded-md hover:bg-white/5">Xassidas</button>
                <button data-nav="livres" class="nav-btn text-sm px-3 py-2 rounded-md hover:bg-white/5">Livres</button>
                <button data-nav="videos" class="nav-btn text-sm px-3 py-2 rounded-md hover:bg-white/5">Vid√©os</button>
            </nav>

            <!-- Espace flexible -->
            <div class="flex-1"></div>

            <!-- Barre de recherche -->
            <div id="searchWrap" class="flex items-center gap-2">
                <input id="globalSearch" type="search" placeholder="Rechercher titre, auteur, tag..."
                    class="rounded-md px-3 py-2 bg-white/5 placeholder:text-slate-400 text-sm focus:outline-none focus:ring-2 focus:ring-amber-600 w-40 sm:w-56 md:w-64 lg:w-72" />
                <button id="btnSearch"
                    class="px-3 py-2 rounded-md bg-amber-600 text-black text-sm font-semibold">Rechercher</button>
            </div>

            <!-- Bouton menu mobile -->
            <button id="mobileMenuBtn" class="p-2 rounded-md bg-gray-200 dark:bg-gray-700 block md:hidden"
                aria-label="Menu">
                <svg class="w-6 h-6 text-gray-800 dark:text-white" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>

            <!-- Bouton clair / sombre -->
            <button id="themeToggle" aria-label="Basculer th√®me"
                class="ml-2 p-2 rounded-md bg-gray-200 dark:bg-gray-700">
                <svg id="themeIcon" class="w-5 h-5 text-amber-500" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
                </svg>
            </button>

        </div>

        <!-- Navigation mobile d√©roulante -->
        <div id="mobileNav" class="md:hidden border-t border-white/5 bg-black/60 hidden">
            <div class="px-4 py-3 flex flex-col gap-2">
                <button data-nav="home" class="w-full text-left px-2 py-2 rounded-md hover:bg-white/5">Accueil</button>
                <button data-nav="xassidas"
                    class="w-full text-left px-2 py-2 rounded-md hover:bg-white/5">Xassidas</button>
                <button data-nav="livres" class="w-full text-left px-2 py-2 rounded-md hover:bg-white/5">Livres</button>
                <button data-nav="videos" class="w-full text-left px-2 py-2 rounded-md hover:bg-white/5">Vid√©os</button>
            </div>
        </div>
    </header>


    <main class="max-w-6xl mx-auto px-4 pt-6">
        <!-- HOME -->
        <section id="page-home" class="page py-8">
            <div class="rounded-2xl overflow-hidden hero-photo glass relative">
                <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"></div>
                <div class="relative z-10 p-8 md:p-12 text-center">
                    <h1 class="text-3xl md:text-4xl font-extrabold pulse-amber">Bienvenue sur Xassida Cloud</h1>
                    <p class="mt-3 text-slate-200 max-w-2xl mx-auto">Biblioth√®que communautaire de Xassidas, livres et
                        vid√©os ‚Äî lecture int√©gr√©e et t√©l√©chargement.</p>
                    <div class="mt-6 flex flex-col sm:flex-row gap-3 justify-center">
                        <button data-nav="xassidas"
                            class="px-4 py-2 rounded-md bg-amber-600 text-black font-bold">Explorer Xassidas</button>
                        <button data-nav="livres"
                            class="px-4 py-2 rounded-md border border-amber-600 text-amber-200">Explorer Livres</button>
                        <button data-nav="videos" class="px-4 py-2 rounded-md bg-white/5 text-white">Kourels &
                            Conferences</button>
                    </div>
                </div>
            </div>

            <div class="mt-8 grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="rounded-xl p-4 glass">
                    <h3 class="font-bold text-amber-300">Lecture int√©gr√©e</h3>
                    <p class="text-sm mt-2 text-slate-300">Ouvre les PDF/Drive dans une modale pour lire sans quitter le
                        site.</p>
                </div>
                <div class="rounded-xl p-4 glass">
                    <h3 class="font-bold text-amber-300">T√©l√©chargement</h3>
                    <p class="text-sm mt-2 text-slate-300">T√©l√©chargement direct dans le site (si le Drive le permet).
                    </p>
                </div>
                <div class="rounded-xl p-4 glass">
                    <h3 class="font-bold text-amber-300">Vid√©os int√©gr√©es</h3>
                    <p class="text-sm mt-2 text-slate-300">Regarde des vid√©os YouTube directement dans une modale.</p>
                </div>
            </div>
        </section>

        <!-- XASSIDAS -->
        <section id="page-xassidas" class="page hidden py-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold">Espace Xassida</h2>
                <button data-nav="home" class="px-3 py-1 rounded-md bg-white/6">Retour</button>
            </div>
            <div id="gridXassida" class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" aria-live="polite">
            </div>
            <div class="mt-6 flex items-center justify-between">
                <div class="text-sm text-slate-400" id="xassidaCount"></div>
                <div class="flex gap-2">
                    <button id="prevX" class="px-3 py-1 rounded-md bg-white/6">Pr√©c√©dent</button>
                    <button id="nextX" class="px-3 py-1 rounded-md bg-white/6">Suivant</button>
                </div>
            </div>
        </section>

        <!-- LIVRES -->
        <section id="page-livres" class="page hidden py-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold">Espace Livres</h2>
                <button data-nav="home" class="px-3 py-1 rounded-md bg-white/6">Retour</button>
            </div>
            <div id="gridLivres" class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" aria-live="polite">
            </div>
            <div class="mt-6 flex items-center justify-between">
                <div class="text-sm text-slate-400" id="livresCount"></div>
                <div class="flex gap-2">
                    <button id="prevL" class="px-3 py-1 rounded-md bg-white/6">Pr√©c√©dent</button>
                    <button id="nextL" class="px-3 py-1 rounded-md bg-white/6">Suivant</button>
                </div>
            </div>
        </section>

        <!-- VIDEOS -->
        <section id="page-videos" class="page hidden py-8">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-2xl font-bold">Vid√©os</h2>
                <button data-nav="home" class="px-3 py-1 rounded-md bg-white/6">Retour</button>
            </div>
            <div id="gridVideos" class="mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4" aria-live="polite">
            </div>
            <div class="mt-6 flex items-center justify-between">
                <div class="text-sm text-slate-400" id="videosCount"></div>
                <div class="flex gap-2">
                    <button id="prevV" class="px-3 py-1 rounded-md bg-white/6">Pr√©c√©dent</button>
                    <button id="nextV" class="px-3 py-1 rounded-md bg-white/6">Suivant</button>
                </div>
            </div>
        </section>

        <footer class="py-8 text-center text-sm text-slate-400">
            ¬© <span id="year"></span> Xassida Cloud ‚Äî Usage √©ducatif ‚Ä¢ D√©velopp√© par Mor Faye
        </footer>
    </main>

    <!-- Document modal -->
    <div id="docModal" class="fixed inset-0 z-70 hidden items-center justify-center">
        <div class="absolute inset-0 bg-black/60 backdrop-blur"></div>
        <div class="relative w-[95%] max-w-6xl h-[90vh] bg-white dark:bg-slate-900 rounded-xl overflow-hidden">
            <!-- Top header with close X (replaces external window icon) -->
            <div class="modal-inner flex items-center justify-between p-3 border-b border-slate-200/10">
                <div>
                    <div id="docTitle" class="font-bold text-slate-900 dark:text-slate-100"></div>
                    <div id="docMeta" class="text-xs text-slate-500 dark:text-slate-400"></div>
                </div>
                <div class="flex items-center gap-2">
                    <button id="docDownload" class="px-3 py-1 rounded-md bg-amber-600 text-black">T√©l√©charger</button>
                    <button id="docCloseTop" class="modal-close" aria-label="Fermer la modale">‚úñ</button>
                </div>
            </div>
            <iframe id="docFrame" class="w-full h-full border-0" title="Lecteur document"></iframe>
            <!-- Bottom-right close -->
            <button id="docCloseBottom" class="modal-bottom-close" aria-label="Fermer la modale">‚úñ</button>
        </div>
    </div>

    <!-- Video modal -->
    <div id="vidModal" class="fixed inset-0 z-70 hidden items-center justify-center">
        <div class="absolute inset-0 bg-black/60 backdrop-blur"></div>
        <div class="relative w-[95%] max-w-3xl bg-black rounded-xl overflow-hidden">
            <div class="modal-inner flex items-center justify-between p-3 border-b border-slate-200/10 bg-slate-900">
                <div>
                    <div id="vidTitle" class="font-bold text-white"></div>
                    <div id="vidMeta" class="text-xs text-slate-400"></div>
                </div>
                <div class="flex items-center gap-2">
                    <button id="vidDownload" class="px-3 py-1 rounded-md bg-amber-600 text-black">T√©l√©charger</button>
                    <button id="vidCloseTop" class="modal-close" aria-label="Fermer la modale">‚úñ</button>
                </div>
            </div>
            <div class="aspect-video bg-black">
                <iframe id="vidFrame" class="w-full h-full border-0"
                    allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen
                    title="Vid√©o"></iframe>
            </div>
            <button id="vidCloseBottom" class="modal-bottom-close" aria-label="Fermer la modale">‚úñ</button>
        </div>
    </div>

    <script>
        /* ======================
           Data (Drive links & YouTube IDs you provided)
           ====================== */
        const XASSIDAS = [
            {id: 'xb_astahfiru_ar', title: 'Astahfiroulaha bihi', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1T3PMH2RzOWQLkogJT4p9ZO6uAaNGViwB/view?usp=drive_link'},
            {id: 'xb_jazbu_ar', title: 'Jazbul Quloob Ar', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1sd0ZrFOdPyAuVgAeUc1Dwv8Tiz-bSRjP/view?usp=drive_link'},
            {id: 'xb_midadi_ar', title: 'Midadi', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1qP6z31dCZeDiBVYguCuk-XBOV3toonPn/view?usp=drive_link'},
            {id: 'xb_mafatikhouljinan_ar', title: 'Mafatikhoul Jinane Ar', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1pd1Qrl9g7pH_4I_84kPON4edwVThHKqh/view?usp=drive_link'},
            {id: 'xb_nafih_ar', title: 'Mawahibou Nafih Ar', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/19984yj2zb-g28XkEZu2pQh0-1er6sp8U/view?usp=drive_link'},
            {id: 'xb_wadjah-wadj_ar', title: 'Wadjahtou Wajhiyajah', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1zXlKZl5HcS58m-0iud5mG-XJ18xiJNTt/view?usp=drive_link'},
            {id: 'xb_adjaraboussama_ar', title: 'Adjabani Raboussama', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1gS3U8Di-6nP7WfmhxbMnlu1V9b3v2z8_/view?usp=drive_link'},
            {id: 'xb_sindidi_ar', title: 'Sindidi Ar', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1l6H_cgOu0Oh-BYTkZegcz405AliTxMug/view?usp=drive_link'},
            {id: 'xb_yaqinikitab_ar', title: 'Yaqiini Kitaabulaahi', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1b9KTwspNf05pgNMPL5K5tKhRFQOHUlsD/view?usp=drive_link'},
            {id: 'xb_touhfatu_ar', title: 'Touhfatoul Mutadarihiin', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1ybWMyBFfHk3w5y3CcOnh6PHkLc3-a0pz/view?usp=drive_link'},
            {id: 'xb_fawzeyni_ar', title: 'Matlaboul Fawzeyni Ar', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1FVAdIRGOzOZW7xipZstsgCGFqwE5I1wl/view?usp=drive_link'}
        ];

        const LIVRES = [
            {id: 'xm_arxuraan', title: 'Alxuraan en Wolof', author: 'ALLAH (SWT)', driveLink: 'https://drive.google.com/file/d/1V8S93byxBrqcwSBpo41emWUP3MNY78Da/view?usp=drive_link'},
            {id: 'xm_ibra', title: 'Cheikh Ibra Fall', author: 'Sheikh Alassane S√®ne', driveLink: 'https://drive.google.com/file/d/1DMmk5X6Gpyf8QiwP20bO5IBqrtDG8cBC/view?usp=drive_link'},
            {id: 'xm_ayni', title: 'Xuratul Ayni', author: 'Serigne Chouhaybou MBACKE', driveLink: 'https://drive.google.com/file/d/1E4Orppn8JrgdTAzS3FvTx9QUjkoEHrz6/view?usp=drive_link'},
            {id: 'xm_maaxuuz', title: 'Wird Maaxuuz', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1OvKKR2YWqXs86k4NwSD7cPQ8vSL81Z2_/view?usp=drive_link'},
            {id: 'xm_smj', title: 'K√†dduy Seri√± Mbay Jaxate (v2)', author: 'Serigne Mbaye Diakhate', driveLink: 'https://drive.google.com/file/d/1BFYghrqN4dx65RBFT9bF1Bc0LG_XjkMv/view?usp=drive_link'},
            {id: 'xm_massalik_fr', title: 'Massalikul Jinaan', author: 'Cheikh Ahmadou Bamba', driveLink: 'https://drive.google.com/file/d/1wj8e41e7VHQRLgS0F0Z67aN2SGhmOugs/view?usp=drive_link'},
            {id: 'juzz1', title: 'Juzz 01', author: 'Serigne Samba Diagne', driveLink: 'https://drive.google.com/file/d/180LvqEAYkNaLPIOj87yaNwd92v0B_D_z/view?usp=drive_link'},
            {id: 'xm_irwaa-u', title: 'Irwaa-u-nadiim', author: 'S√´ri√± Muhammadu Lamin J√≥ob', driveLink: 'https://drive.google.com/file/d/1Gn2VBV60DnWsN2BhHT0AzKTu1a7pzP4G/view?usp=drive_link'}
        ];

        const VIDEOS = [
            {
                id: 'v1',
                title: 'Radiitou',
                speaker: 'Koureel 1 Adolescent',
                tag: 'Xassida',
                link: 'https://youtu.be/R8jJ2IGIATU?si=u8mED8jh9z7l8zvq/preview'
            },
            {
                id: 'v2',
                title: 'Ra-i-ya Serigne Moustapha Diop',
                speaker: 'Kourel 1 FMN Thies - Porokhane 2022',
                tag: 'kourel',
                link: 'https://youtu.be/rhctQKEQYJw?si=HX40KP3_08vr60_e/preview'
            },

            {
                id: 'v3',
                title: 'Ahbabtou - Jazbul Quloob',
                speaker: 'Kourel FMN Thies',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/GhSprYAh84s?si=UdmYHKvV7A1xuNWF/preview'
            },

            {
                id: 'v4',
                title: 'Hudaa ilahi...',
                speaker: 'Kourel 1 HT Nourou dareyni Touba',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/iUt3j3beMiQ?si=fXILPgYCMZk2LIIe/preview'
            },

            {
                id: 'v5',
                title: 'Jazbu Darou Moukhty',
                speaker: 'Kourel 1 FMN Thies',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/vNqSvlJqqpw?si=ZIDRZY3ctPaAdxy6/preview'
            },

            {
                id: 'v6',
                title: 'Mawahibou Serigne Massamba',
                speaker: 'Kourel 1 National',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/3JvHSQmnHag?si=qIRrkDKg4ePqp7Kc/preview'
            },

            {
                id: 'v7',
                title: 'Bismil Ila ikhfini',
                speaker: 'Kourel Adolescent',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/jHWmss42p_Y?si=qrdG4GZLendLYGLF/preview'
            },

            {
                id: 'v8',
                title: 'Matlabul Fawzeyni',
                speaker: 'Kourel 1 Treviso - Kazu Rajab 2025',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/VNw2Te69ACs?si=N48lLU-Uig6m0Mxh/preview'
            },

            {
                id: 'v9',
                title: 'Wakaana Haqqan',
                speaker: 'Kourel 1 HT Touba',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/LE7W8T69yX4?si=d9TFqASoacMoPUXX/preview'
            },

            {
                id: 'v10',
                title: 'MadalKhabirou',
                speaker: 'Kourel Tout Tank HTDKH',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/W-hiLFeJad4?si=OieGJySNTLeFlxsf/preview'
            },

            {
                id: 'v11',
                title: 'Wajaba Hamdu',
                speaker: 'Kourel Nuuru Darayni HT Thies',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/bLTjOorzorM?si=LfOnB2vM2K93fjS_/preview'
            },

            {
                id: 'v12',
                title: 'Hamdii Washukri',
                speaker: 'Kourel 1 Mafatikhoul Bichri Touba',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/9SZ5JVsFMks?si=s2janehPTSnBJ501/preview'
            },

            {
                id: 'v13',
                title: 'Mada Zikroullah',
                speaker: 'Modou Ndella FAll',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/8VCsthCTsDQ?si=Hnoi8COQ27J7HkFF/preview'
            },

            {
                id: 'v14',
                title: 'Jazbul Quloob',
                speaker: 'Kourel Nuurud Dareyni HT Thies',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/iUt3j3beMiQ?si=fXILPgYCMZk2LIIe/preview'
            },

            {
                id: 'v15',
                title: 'Tahmiss Serigne Moustapha Diop',
                speaker: 'Kourel Tout Tank Cellule HTDKH',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/jDHpTmrEZvw?si=AMC-lhCPZ_Wl-lcA/preview'
            },

            {
                id: 'v16',
                title: 'Mawahibou 78 - Serigne Massamba',
                speaker: 'Kourel National Italie',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/wiDERmXlD74?si=753BMwg5fSQ-UzUJ/preview'
            },

            {
                id: 'v17',
                title: 'Mawahibou WKSM',
                speaker: 'Kourel FMN Thies',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/EV2Wxz6_yes?si=piHZ1lDsRWNpbT0f/preview'
            },

            {
                id: 'v18',
                title: 'Midadi - Porokhane 2023',
                speaker: 'Kourel HT Dakar',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/HKQeeMbiGkY?si=IxKRfMRZ3zHf5voo/preview'
            },

            {
                id: 'v19',
                title: 'Midadi',
                speaker: 'Kourel 1 Akhlou Minan Diourbel',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/yXv1xlj12K4?si=N5HTEcHvTZn832bI/preview'
            },

            {
                id: 'v20',
                title: 'Midadi Nawaytou',
                speaker: 'Kourel 1 National',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/DnJDXt56BXc?si=ErZPDeixnZZxcRcL/preview'
            },

            {
                id: 'v21',
                title: 'Midadi',
                speaker: 'Kourel HT Rufisque - Ramadan 2021',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/XDP_Jan00u8?si=xNZhMAt8jHhyAX7b/preview'
            },

            {
                id: 'v22',
                title: 'Midadi',
                speaker: 'Kourel 1 HT Rufisque',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/01-GduDwwqA?si=XkPocsC6lofyqscN/preview'
            },

            {
                id: 'v23',
                title: 'Madahtou - Midadi',
                speaker: 'Kourel Treviso Italie',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/4NtETmk9Qvc?si=VFfsuoKLEhKJUaYY/preview'
            },

            {
                id: 'v24',
                title: 'Midadi Nawaytou - Micro Serigne Lamine Seye',
                speaker: 'Kourel MN Thies',
                tag: 'Conf√©rence',
                link: 'https://youtu.be/iUt3j3beMiQ?si=fXILPgYCMZk2LIIe/preview'
            },

            {
                id: 'v25',
                title: 'Saana Ilaahi',
                speaker: 'Kourel 3 Saalihina - Micro Mame Mor Dione',
                tag: 'Xassida',
                link: 'https://youtu.be/0kDcjPqg2M8?si=_qVK56Wk81hKmGLl/preview'
            },

            {
                id: 'v26',
                title: 'Mafatikhoul Jinaan Darou Moukhty',
                speaker: '',
                tag: 'Xassida',
                link: 'https://youtu.be/TO6wocydR1k?si=i333taufx5ExKeNT/preview'
            },

            {
                id: 'v27',
                title: 'Mafatikhoul Jinaan Darou Moukhty',
                speaker: 'Kourel WKSM HT',
                tag: 'Xassida',
                link: 'https://youtu.be/6TuPuWAXXEM?si=xp4C8I_HKsUH34Wp/preview'
            },

            {
                id: 'v28',
                title: 'Mafatikhoul Jinaan - Radjass',
                speaker: 'Serigne Bolle Mbaye',
                tag: 'Xassida',
                link: 'https://youtu.be/JOV5vli0Uhk?si=kxgRnJ3PBII7lsD5/preview'
            },

            {
                id: '29',
                title: 'Ajaabani - Yaaman - Zalat - Wajahtu',
                speaker: 'Selection',
                tag: 'Xassida',
                link: 'https://youtu.be/HqNZFvwWGxI?si=IpHcyEfPVIx9fH-1/preview'
            },

            {
                id: 'v30',
                title: 'Ajabani Raboussama',
                speaker: 'Kourel 1 HT Thies',
                tag: 'Xassida',
                link: 'https://youtu.be/Z9Rz6OxKpLw?si=jl9D4U6ZXQjXokB4/preview'
            },

            {
                id: 'v31',
                title: 'Midadi - Micro Ousseynou Fall',
                speaker: 'Kourel Treviso Italie',
                tag: 'Xassida',
                link: '/preview'
            },

            {
                id: 'v32',
                title: 'Ajabani Xayruba',
                speaker: 'Serigne CISSE',
                tag: 'Xassida',
                link: 'https://youtu.be/8nMAvc1gLEA?si=HdX95BNFSCaKOT54/preview'
            },

            {
                id: 'v33',
                title: 'Adjabani Raboussama WKSM',
                speaker: 'HT Ramadan 2025',
                tag: 'Xassida',
                link: 'https://youtu.be/Of6jpsSK1pU?si=5C0zuXSuqHWs0V9R/preview'
            },

            {
                id: 'v34',
                title: 'Extrait Mawahibou',
                speaker: 'Noce',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/B2ZT02G5i-0?si=pR2vSjsVxO5u-l-H/preview'
            },

            {
                id: 'v35',
                title: 'Noce',
                speaker: 'Mame Mor Dione',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/4vcjplMEIRs?si=fjoYLYlk50uJ3rMW/preview'
            },

            {
                id: 'v36',
                title: 'Short',
                speaker: 'Noce',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/mRmpkK8fHYw?si=PhcghRzidDPCb-7p/preview'
            },

            {
                id: 'v37',
                title: 'Extrait Mawahibou',
                speaker: 'Noce',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/VpWTSYR-8x4?si=BrP28wMNQp38NdIo/preview'
            },

            {
                id: 'v38',
                title: 'Cheikh Ibra Fall',
                speaker: 'Baay Ndiaga DIOP',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/lyqPv_NPg0Y?si=BvpgYjn1r8OfkVS5/preview'
            },

            {
                id: 'v39',
                title: 'Waxtaan ci Xassida Nuuru Daarayni',
                speaker: 'Serigne Ahmadou MBACKE',
                tag: 'Xassida',
                link: 'https://youtu.be/g7e3HHtQlJs?si=zujlnvtk9ft9XNdv/preview'
            },

            {
                id: 'v40',
                title: 'La patience',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/wwRu0s_AllI?si=90Lpychsrt2wjU3M/preview'
            },

            {
                id: 'v41',
                title: 'La confiance en soi',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/bV39SOTqumU?si=NeZIfDZcTS-GxGzN/preview'
            },

            {
                id: 'v42',
                title: 'Serenite et Secrets de reussite dans le vie',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/fEALWBy1mBQ?si=fwhQKloPE7oCPRNU/preview'
            },

            {
                id: 'v43',
                title: "Les Manieres d'ajir",
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/EXPs-g0EVvo?si=KcubdRMMd1-0pSq9/preview'
            },

            {
                id: 'v44',
                title: 'Tarbiyah ak Xassida',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/myyv9nwhQ9o?si=rNgd4xUfsQ6cZ40y/preview'
            },

            {
                id: 'v45',
                title: 'Sante Yalla',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/mrQ7bBh1_DA?si=c9hxTiu9OcZuNQKS/preview'
            },

            {
                id: 'v46',
                title: 'Les comportements recommand√©s par Serigne Touba',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/_AbPVhl--Fw?si=mo5F3rxnnufAV-ny/preview'
            },

            {
                id: 'v47',
                title: 'Histoire Seydina Mouhamad (PSL)',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/aGA7JUKYwog?si=5R4MNGxa8Jbb29AX/preview'
            },

            {
                id: 'v48',
                title: 'La pens√©e positive - Xel mu Sel',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/lkPPIBWKNp0?si=a9aNl1pKNlBIvMTi/preview'
            },

            {
                id: 'v49',
                title: 'La confiance en soi',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/vzzcfMWCtJI?si=kCCIYQXE3ySBL9yj/preview'
            },

            {
                id: 'v50',
                title: 'Tawhiid',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/OIXUy7g46e4?si=bg6ug-u2LmSb3BRc/preview'
            },

            {
                id: 'v51',
                title: 'Cheikh Ahmadou Bamba',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/zm_cvApH7Jw?si=1halYGFWoKVknm8n/preview'
            },

            {
                id: 'v52',
                title: 'Tuub bakaar - pouvoir du repentir',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/dgyL9l9S6ao?si=yWijweTakr6fkljK/preview'
            },

            {
                id: 'v53',
                title: 'Yitt√©',
                speaker: 'Serigne Bassirou Khelcom',
                tag: 'Xassida',
                link: 'https://youtu.be/7OHJWFylPRY?si=ohz3TSrNgYnsGqMe/preview'
            },

            {
                id: 'v54',
                title: 'Extrait Xassida',
                speaker: 'Noce',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/_SQOed3ovzw?si=wmglxV4KLgVj8qcL/preview'
            },

            {
                id: 'v55',
                title: 'Extrait Halaman',
                speaker: 'Xallil Gueye',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/x_VyNYevLbU?si=rWA137vYkBOyHuhS/preview'
            },

            {
                id: 'v56',
                title: 'Extrait Xassida',
                speaker: 'HT',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/jnz-X2S8no0?si=tRJzP-bwJAi3oIwS/preview'
            },

            {
                id: 'v57',
                title: 'Kourel Selection HT',
                speaker: 'Noce',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/aIKAHaDS9Kc?si=8WWJ-PkFcghLwr5f/preview'
            },

            {
                id: 'v58',
                title: 'Extrait Mawahibou',
                speaker: 'Noce',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/_a4X3J5-szk?si=uq2xCnjods2EY3Ss/preview'
            },

            {
                id: 'v59',
                title: 'Tahmiss Serigne Tafsir DIOP',
                speaker: 'Kourel Adolescent',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/_a4X3J5-szk?si=uq2xCnjods2EY3Ss/preview'
            },

            {
                id: 'v60',
                title: 'Extrait Adjabanirabussama',
                speaker: 'Micro Khalil Gueye',
                tag: 'Xassida',
                link: 'https://youtube.com/shorts/nRzJXpq9FNI?si=UkMsJe1621_V__p2/preview'
            },

            {
                id: 'v61',
                title: 'Yassuru',
                speaker: 'Kourel HT Thies',
                tag: 'Xassida',
                link: 'https://youtu.be/l86zdOR0rbE?si=qo-FFVHpFJKQAuH4/preview'
            },

            {
                id: 'v61',
                title: 'Saani ilaahi',
                speaker: 'Kourel 3 Salihina',
                tag: 'Xassida',
                link: 'https://youtu.be/0kDcjPqg2M8?si=81PhV3CdAFlvyyQW/preview'
            },


        ];


        // Trie les vid√©os par ordre alphab√©tique du titre
        VIDEOS.sort((a, b) => a.title.localeCompare(b.title, 'fr', {sensitivity: 'base'}));

        /* ======================
           Internal registry (no visible IDs)
           ====================== */
        const uidMap = new Map();
        function registerItem(item) {
            const key = Math.random().toString(36).slice(2, 10);
            uidMap.set(key, item);
            return key;
        }

        /* helpers */
        function esc(s = '') {return String(s).replace(/[&<>"']/g, c => ({'&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;'}[c]));}
        function toPreview(url) {
            if (!url) return '';
            try {
                // extraire l'ID du fichier Google Drive
                const match = url.match(/\/file\/d\/([^\/]+)\//);
                if (match && match[1]) {
                    const id = match[1];
                    const direct = `https://drive.google.com/uc?export=download&id=${id}`;
                    // utiliser Google Docs Viewer
                    return `https://docs.google.com/gview?embedded=true&url=${encodeURIComponent(direct)}`;
                }
                // fallback: si pas d'ID trouv√©, utiliser le lien brut
                return `https://docs.google.com/gview?embedded=true&url=${encodeURIComponent(url)}`;
            } catch (err) {
                console.error('Erreur cr√©ation preview:', err);
                return url;
            }
        }

        function driveIdFromUrl(url) {const m = url.match(/\/file\/d\/([^\/]+)\//); return m ? m[1] : null;}

        /* pagination */
        let xPage = 1, lPage = 1, vPage = 1; const pageSize = 9;

        /* DOM refs */
        const pages = {
            home: document.getElementById('page-home'),
            xassidas: document.getElementById('page-xassidas'),
            livres: document.getElementById('page-livres'),
            videos: document.getElementById('page-videos')
        };
        function showPage(name) {
            Object.values(pages).forEach(p => p.classList.add('hidden'));
            if (pages[name]) pages[name].classList.remove('hidden');
            history.replaceState(null, '', '#' + name);
        }

        /* nav */
        document.querySelectorAll('[data-nav]').forEach(btn => btn.addEventListener('click', e => {
            showPage(btn.dataset.nav);
            document.getElementById('mobileNav').classList.add('hidden');
        }));

        document.getElementById('mobileMenuBtn').addEventListener('click', () => {
            document.getElementById('mobileNav').classList.toggle('hidden');
        });

        /* theme */
        const htmlEl = document.documentElement;
        const themeToggle = document.getElementById('themeToggle');
        function applyTheme(t) {
            if (t === 'light') {
                htmlEl.classList.add('light');
                localStorage.setItem('theme', 'light');
                themeIcon.innerHTML = `<path d="M21 12.79A9 9 0 1111.21 3A7 7 0 0021 12.79z" />`;
                // ‚òÄÔ∏è Soleil (mode clair)
            } else {
                htmlEl.classList.remove('light');
                localStorage.setItem('theme', 'dark');
                themeIcon.innerHTML = `<path d="M12 4.5V2m0 20v-2.5M4.5 12H2m20 0h-2.5M5.64 5.64l-1.77-1.77m15.26 15.26l-1.77-1.77M18.36 5.64l1.77-1.77M5.64 18.36l-1.77 1.77M12 6.5a5.5 5.5 0 1 1 0 11a5.5 5.5 0 0 1 0-11z" />`;

                // üåô Lune (mode sombre)
            }
        }
        applyTheme(localStorage.getItem('theme') || 'dark');
        themeToggle.addEventListener('click', () => applyTheme(htmlEl.classList.contains('light') ? 'dark' : 'light'));

        /* Build card */
        function buildCard(item, kind) {
            const key = registerItem({...item, kind});
            const tag = kind === 'x' ? 'Xassida' : (kind === 'l' ? 'Livre' : 'Vid√©os');
            const initials = (item.title || '').split(' ').slice(0, 2).map(s => s[0]).join('').toUpperCase();
            const el = document.createElement('article');
            el.className = 'rounded-xl p-4 glass hover:shadow-lg transition flex flex-col h-full';
            el.innerHTML = `
    <div class="h-32 rounded-md bg-gradient-to-br from-black/20 to-white/5 flex items-center justify-center text-3xl font-extrabold text-amber-400">${esc(initials)}</div>
    <h3 class="mt-3 font-semibold text-lg">${esc(item.title)}</h3>
    <p class="text-sm text-slate-300 mt-1">${esc(item.author || item.speaker || '')}</p>
    <div class="mt-3 flex items-center justify-between gap-2">
      <div class="text-xs px-2 py-1 rounded-full bg-amber-600 text-black">${esc(tag)}</div>
      <div class="flex gap-2">
        ${kind !== 'v' ? `<button class="btn-read px-3 py-1 rounded-md btn-amber" data-uid="${key}">Lire</button>
                        <button class="btn-dl px-3 py-1 rounded-md bg-white/6" data-uid="${key}">T√©l√©charger</button>` :
                    `<button class="btn-watch px-3 py-1 rounded-md btn-amber" data-uid="${key}">Regarder</button>`}
      </div>
    </div>`;
            return el;
        }

        /* render lists */
        const gridX = document.getElementById('gridXassida'), gridL = document.getElementById('gridLivres'), gridV = document.getElementById('gridVideos');
        const countX = document.getElementById('xassidaCount'), countL = document.getElementById('livresCount'), countV = document.getElementById('videosCount');

        function renderList(items, container, page, kind, countEl) {
            const total = items.length;
            const start = (page - 1) * pageSize;
            const slice = items.slice(start, start + pageSize);
            container.innerHTML = '';
            if (slice.length === 0) {
                container.innerHTML = `<div class="p-6 text-center text-slate-300 bg-white/6 rounded-md">Aucun r√©sultat</div>`;
            } else {
                slice.forEach(it => container.appendChild(buildCard(it, kind)));
            }
            if (countEl) countEl.textContent = `${Math.min(total, start + 1)}‚Äì${Math.min(total, start + pageSize)} sur ${total}`;
        }

        renderList(XASSIDAS, gridX, xPage, 'x', countX);
        renderList(LIVRES, gridL, lPage, 'l', countL);
        renderList(VIDEOS, gridV, vPage, 'v', countV);

        /* pagination buttons */
        document.getElementById('prevX').addEventListener('click', () => {if (xPage > 1) xPage--; renderList(XASSIDAS, gridX, xPage, 'x', countX);});
        document.getElementById('nextX').addEventListener('click', () => {xPage++; renderList(XASSIDAS, gridX, xPage, 'x', countX);});
        document.getElementById('prevL').addEventListener('click', () => {if (lPage > 1) lPage--; renderList(LIVRES, gridL, lPage, 'l', countL);});
        document.getElementById('nextL').addEventListener('click', () => {lPage++; renderList(LIVRES, gridL, lPage, 'l', countL);});
        document.getElementById('prevV').addEventListener('click', () => {if (vPage > 1) vPage--; renderList(VIDEOS, gridV, vPage, 'v', countV);});
        document.getElementById('nextV').addEventListener('click', () => {vPage++; renderList(VIDEOS, gridV, vPage, 'v', countV);});

        /* search */
        const globalSearch = document.getElementById('globalSearch'), btnSearch = document.getElementById('btnSearch');
        function doGlobalSearch() {
            const q = (globalSearch.value || '').trim().toLowerCase();
            if (!q) {
                xPage = lPage = vPage = 1;
                renderList(XASSIDAS, gridX, xPage, 'x', countX);
                renderList(LIVRES, gridL, lPage, 'l', countL);
                renderList(VIDEOS, gridV, vPage, 'v', countV);
                showPage('home');
                return;
            }
            const rx = XASSIDAS.filter(i => (i.title + ' ' + (i.author || '')).toLowerCase().includes(q));
            const rl = LIVRES.filter(i => (i.title + ' ' + (i.author || '')).toLowerCase().includes(q));
            const rv = VIDEOS.filter(i => (i.title + ' ' + (i.speaker || '') + ' ' + (i.tag || '')).toLowerCase().includes(q));
            renderList(rx, gridX, 1, 'x', countX);
            renderList(rl, gridL, 1, 'l', countL);
            renderList(rv, gridV, 1, 'v', countV);
            showPage('xassidas');
        }
        btnSearch.addEventListener('click', doGlobalSearch);
        globalSearch.addEventListener('keydown', (e) => {if (e.key === 'Enter') doGlobalSearch(); if (e.key === 'Escape') {globalSearch.value = ''; doGlobalSearch();} });

        /* delegated click handling */
        document.body.addEventListener('click', async (e) => {
            const uid = e.target?.dataset?.uid;
            if (uid) {
                const item = uidMap.get(uid);
                if (!item) {alert('Ressource introuvable.'); return;}

                if (e.target.classList.contains('btn-read')) {
                    openDocModal(item);
                    return;
                }
                if (e.target.classList.contains('btn-dl')) {
                    await telechargerItem(item);
                    return;
                }
                if (e.target.classList.contains('btn-watch')) {
                    openVidModal(item);
                    return;
                }
            }
        });

        /* Modal logic */
        const docModal = document.getElementById('docModal'), docFrame = document.getElementById('docFrame');
        const docTitle = document.getElementById('docTitle'), docMeta = document.getElementById('docMeta');
        const docCloseTop = document.getElementById('docCloseTop'), docCloseBottom = document.getElementById('docCloseBottom'), docDownload = document.getElementById('docDownload');

        function openDocModal(item) {
            docModal._current = item;
            docTitle.textContent = item.title || '';
            docMeta.textContent = item.author || '';
            docFrame.src = toPreview(item.driveLink || '');
            docModal.classList.remove('hidden'); docModal.classList.add('flex');
            document.documentElement.style.overflow = 'hidden';
            // make sure close buttons visible (style)
            setTimeout(() => {docCloseBottom.classList.toggle('light', document.documentElement.classList.contains('light'))}, 60);
        }
        function closeDocModal() {
            docModal.classList.add('hidden'); docModal.classList.remove('flex');
            docFrame.src = 'about:blank';
            docModal._current = null;
            document.documentElement.style.overflow = '';
        }
        docCloseTop.addEventListener('click', closeDocModal);
        docCloseBottom.addEventListener('click', closeDocModal);
        docDownload.addEventListener('click', async () => {
            if (!docModal._current) return alert('Aucune ressource s√©lectionn√©e.');
            await telechargerItem(docModal._current);
        });
        docModal.addEventListener('click', (e) => {if (e.target === docModal) closeDocModal();});

        /* Video modal */
        const vidModal = document.getElementById('vidModal'), vidFrame = document.getElementById('vidFrame');
        const vidTitle = document.getElementById('vidTitle'), vidMeta = document.getElementById('vidMeta');
        const vidCloseTop = document.getElementById('vidCloseTop'), vidCloseBottom = document.getElementById('vidCloseBottom'), vidDownload = document.getElementById('vidDownload');

        function openVidModal(item) {
            vidModal._current = item;
            vidTitle.textContent = item.title || '';
            vidMeta.textContent = item.speaker || '';

            let src = '';

            // üîç D√©tection du type de lien
            if (item.link.includes('drive.google.com')) {
                src = item.link.includes('/preview')
                    ? item.link
                    : item.link.replace('/view', '/preview');
            } else if (item.link.includes('youtu')) {
                const match = item.link.match(/(?:v=|\/embed\/|youtu\.be\/)([^"&?\/\s]+)/);
                if (match && match[1]) {
                    src = `https://www.youtube.com/embed/${match[1]}?autoplay=1&rel=0`;
                }
            } else {
                alert('Format vid√©o non reconnu.');
                return;
            }

            vidFrame.src = src;
            vidModal.classList.remove('hidden');
            vidModal.classList.add('flex');
            document.documentElement.style.overflow = 'hidden';
            hideHeader();

            // üåó Th√®me clair/sombre du bouton de fermeture
            setTimeout(() => {
                vidCloseBottom.classList.toggle(
                    'light',
                    document.documentElement.classList.contains('light')
                );
            }, 60);


            function showCustomAlert(msg) {
                let alertBox = document.getElementById("customAlert");
                if (!alertBox) {
                    alertBox = document.createElement("div");
                    alertBox.id = "customAlert";
                    document.body.appendChild(alertBox);
                }
                alertBox.innerHTML = msg;
                alertBox.classList.add("show");
                setTimeout(() => alertBox.classList.remove("show"), 3500);
            }


            // üß© V√©rifie si YouTube bloque l‚Äôint√©gration (erreur 153)
            if (item.link.includes('youtu')) {
                const check = setTimeout(() => {
                    showCustomAlert(
                        "‚ö†Ô∏è Cette vid√©o ne peut pas √™tre lue ici.<br>Ouverture directe sur YouTube..."
                    );
                    closeVidModal();
                    window.open(item.link, "_blank");
                }, 5000);

                vidFrame.onload = () => clearTimeout(check);
            }
        }



        function closeVidModal() {
            vidModal.classList.add('hidden'); vidModal.classList.remove('flex');
            vidFrame.src = '';
            vidModal._current = null;
            document.documentElement.style.overflow = '';
        }
        vidCloseTop.addEventListener('click', closeVidModal);
        vidCloseBottom.addEventListener('click', closeVidModal);

        vidDownload.addEventListener('click', async () => {
            if (!vidModal._current) return alert('Aucune vid√©o s√©lectionn√©e.');
            const link = vidModal._current.link;
            if (!link) return alert('Aucun lien disponible.');

            if (link.includes('drive.google.com')) {
                // T√©l√©chargement direct depuis Drive
                const match = link.match(/\/file\/d\/([^\/]+)\//);
                const id = match ? match[1] : null;
                const direct = id
                    ? `https://drive.google.com/uc?export=download&id=${id}`
                    : link;
                window.open(direct, '_blank');
            } else if (link.includes('youtu')) {
                // Copie le lien YouTube
                try {
                    await navigator.clipboard.writeText(link);
                    alert('üîó Lien YouTube copi√©. Ouvre-le dans ton navigateur pour t√©l√©charger.');
                } catch {
                    alert('Voici le lien : ' + link);
                }
            }
        });


        vidModal.addEventListener('click', (e) => {if (e.target === vidModal) closeVidModal();});

        /* helper to find item by preview (if needed) */
        function findItemByDrivePreview(previewUrl) {
            return [...XASSIDAS, ...LIVRES].find(v => toPreview(v.driveLink || '') === previewUrl) || null;
        }

        /* download function: fetch -> blob (stays within site), fallback copies link and shows preview */
        async function telechargerItem(item) {
            if (!item) {
                alert('Ressource introuvable.');
                return;
            }

            const link = item.driveLink || '';
            if (!link) {
                alert('Aucun lien de t√©l√©chargement.');
                return;
            }

            // On tente d'extraire l'ID du lien Google Drive
            const idMatch = link.match(/\/file\/d\/([^\/]+)\//);
            let directLink = link;
            if (idMatch && idMatch[1]) {
                directLink = `https://drive.google.com/uc?export=download&id=${idMatch[1]}`;
            }

            try {
                // Ouvre le lien dans un nouvel onglet (√©vite CORS)
                window.open(directLink, "_blank", "noopener");
            } catch (err) {
                console.error("Erreur d'ouverture du lien :", err);
                alert("Impossible d'ouvrir le lien. Copi√© dans le presse-papiers.");
                try {
                    await navigator.clipboard.writeText(link);
                } catch (e) {
                    console.error("Impossible de copier :", e);
                }
            }
        }


        /* ESC modals pour xassidas yi  */
        document.addEventListener('keydown', (e) => {if (e.key === 'Escape') {closeDocModal(); closeVidModal();} });

        /* delegated clicks for cards: we registered items earlier via buildCard */
        document.body.addEventListener('click', (e) => {
            // the delegated handlers above already handle data-uid clicks
        });

        /* Intersection observer nice reveal */
        const io = new IntersectionObserver(entries => entries.forEach(en => {if (en.isIntersecting) en.target.classList.add('animate-fadeIn');}), {threshold: 0.12});
        setTimeout(() => document.querySelectorAll('.rounded-xl').forEach(el => io.observe(el)), 300);

        /* hide mobile nav when clicking outside */
        document.addEventListener('click', (e) => {
            const m = document.getElementById('mobileNav');
            if (!m) return;
            if (!m.classList.contains('hidden') && !e.target.closest('#mobileNav') && !e.target.closest('#mobileMenuBtn')) m.classList.add('hidden');
        });

        /* year */
        document.getElementById('year').textContent = new Date().getFullYear();

        /* initial page */
        const initial = location.hash.replace('#', '') || 'home';
        if (['home', 'xassidas', 'livres', 'videos'].includes(initial)) showPage(initial); else showPage('home');

    </script>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const splash = document.getElementById('splashScreen');
            const logo = document.getElementById('splashLogo');

            // Effet de zoom sur le logo
            logo.style.transition = "transform 1.2s ease, opacity 1.2s ease";
            logo.style.transform = "scale(0.8)";
            logo.style.opacity = "0";

            // Lance l‚Äôanimation apr√®s un court d√©lai
            setTimeout(() => {
                logo.style.transform = "scale(1.2)";
                logo.style.opacity = "1";
            }, 200);

            // Fait dispara√Ætre l‚Äô√©cran de chargement apr√®s 3,5 secondes
            setTimeout(() => {
                splash.style.opacity = "0";
                splash.style.transition = "opacity 0.8s ease";
                setTimeout(() => splash.style.display = "none", 800);
                document.documentElement.style.overflow = '';
            }, 3500);
        });
    </script>


    <script>
        // Cible ton header
        const header = document.querySelector("header");

        // Fonction pour cacher la barre
        function hideHeader() {
            header.classList.add("hidden");
        }

        // Fonction pour r√©afficher la barre
        function showHeader() {
            header.classList.remove("hidden");
        }

        // Exemple : simulation quand tu entres/sors du mode lecture
        // üëâ tu remplaceras ces deux lignes par ton vrai code plus tard
        const lireBtns = document.querySelectorAll(".btn-read");
        const closeBtns = document.querySelectorAll(".modal-bottom-close");

        lireBtns.forEach(btn => btn.addEventListener("click", () => {
            hideHeader(); // Cache la barre quand on lit
        }));

        closeBtns.forEach(btn => btn.addEventListener("click", () => {
            showHeader(); // R√©affiche quand on ferme
        }));
    </script>

    <script>
        // Supprime le bouton X du haut d√®s que la modale s'ouvre
        const observer = new MutationObserver(() => {
            document.querySelectorAll('.modal-close, button[aria-label="Close"], button[title="Fermer"], button.close-modal')
                .forEach(btn => btn.remove());
        });

        observer.observe(document.body, {childList: true, subtree: true});
    </script>


</body>

</html>

